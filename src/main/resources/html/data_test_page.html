<!DOCTYPE html>
<!--
The MIT License

Copyright 2019 bschorn.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
-->
<html>
    <head>
        <style type="text/css">
            body {
                margin: 0 auto;
                padding: 0;
                font-family: 'Roboto', sans-serif;
                font-size: 0.85em;
                border-radius: 5px;
                /* #62678E Granite */
                /* #F5C45E Mustard */
            }
            * {
                /* makes it easier to size boxes */
                /*box-sizing: border-box;*/
            }
            h2 {
                margin: 0.15em;
            }
            p {
                margin: 0.15em;
            }
            input, label {
                display:block;
                font-size: 1em;
            }
            form > div {
                min-width: 250px;
            }
            span {
                font-weight: bold;
            }
            div.dormant {
                display: none;
            }
            div.section {
                margin: 0.15em;
                padding: 2px;
                border-radius: 6px;
                border-width: 2px;
                border-style: solid;
                color: #f7f7f7;
                background-color: #606470;
                border-color: #323643;
            }

            input:invalid {
                border-color: red;
                border-width: 1px;
            }
            input:valid {
                border-color: inherit;
                border-width: 1px;
            }
            div.collection {
                padding: 2px;
            }
            div.collection-title {
                text-align: center;
                font-weight: bold;
                color: #f7f7f7;
                letter-spacing: 2px;
            }
            label.node-form-label {
                text-align: center;
                font-weight: bold;
                color: #f7f7f7;
                letter-spacing: 2px;
            }
            caption {
                padding: 5px;
                font-size: 11pt;
                font-weight: bold;
                letter-spacing: 1px;
                background-color: #93deff;
                color: #323643;
            }
            table {
                table-layout: fixed;
                font-family: 'Roboto', sans-serif;
                font-size: 0.75em;
                letter-spacing: 1px;
                border-collapse: collapse;
                border: 1px solid #323643;
                margin: 0px;
                padding: 2px;
                color: #f7f7f7;
                background-color: #323643;
                text-align: left;
                /* #323643 dark-gray */
                /* #606470 gray */
                /* #93deff baby-blue */
                /* #f7f7f7 white-white-gray */
            }
            thead {
                border-bottom: 2px solid #93deff;
                letter-spacing: 2px;
            }
            tfoot {
                border-top: 2px solid #93deff;
                letter-spacing: 2px;
            }

            th {
                background-color: #323643;
                padding-top: 4px;
                padding-bottom: 4px;
                padding-left: 5px;
                padding-right: 5px;
            }
            tbody tr:hover {
                background-color: #93deff;
                color: #323643;
            }
            td {
                font-family: 'Roboto Mono', monospace;
                padding-top: 2px;
                padding-bottom: 2px;
                padding-left: 5px;
                padding-right: 5px;
                border-top: 1px solid #606470;
            }

            th.active_node_numeric, td.active_node_numeric {
                text-align: right;
            }
            th.node_numeric, td.node_numeric {
                text-align: right;
            }

            body {
                display: grid;
                grid-gap: 5px;
                grid-template-columns: 1fr 4fr 4fr;
                grid-template-areas: "left	right";
                max-width: 900px;
            }
            div.left-side {
                grid-area: left;
                margin: 5px;
            }
            div.right-side {
                grid-area: right;
                margin: 5px;
            }
            div#available {
                display: none;
            }
            div.button {
                padding-bottom: 2px;
                padding-top: 2px;
            }
            label:hover {
                text-decoration-line: line-through;
            }
        </style>
        <script>
            function InterNodalAdmin() {

                var args = Array.prototype.slice.call(arguments),
                        callback = args.pop(),
                        modules = (args[0] && typeof args[0] === "string") ? args : args[0], i;

                if (!(this instanceof InterNodalAdmin)) {
                    return new InterNodalAdmin(modules, callback);
                }
                this.html_address = 'http://localhost:18200/admin-ws/html';
//this.html_address = 'http://iapp480.devin1.ms.com:18200/admin-ws/html';
                this.json_address = 'http://localhost:18200/admin-ws/json';
                this.data_address = 'http://localhost:18200/admin-ws/data';
//this.data_address = 'http://iapp480.devin1.ms.com:18200/admin-ws/data';
//this.json_address = 'http://iapp480.devin1.ms.com:18200/admin-ws/json';
                this.html_content_headers = new Headers({'Content-Type': 'text/html; charset=utf-8'});
                this.json_content_headers = new Headers({'Content-Type': 'application/json'});
                this.get_options = function (headers) {
                    return {
                        method: 'GET',
                        mode: 'cors',
                        cache: 'no-cache',
                        credentials: 'include',
                        headers: headers
                    };
                };
                this.post_options = function (headers, content) {
                    return {
                        method: 'POST',
                        mode: 'cors',
                        cache: 'no-cache',
                        credentials: 'include',
                        headers: headers,
                        redirect: 'follow', // manual, *follow, error
                        referrer: 'no-referrer', // no-referrer, *client
                        body: content
                    };
                };

                if (!modules || modules === '*') {
                    modules = [];
                    for (i in InterNodalAdmin.modules) {
                        if (InterNodalAdmin.modules.hasOwnProperty(i)) {
                            modules.push(i);
                        }
                    }
                }

                for (i = 0; i < modules.length; i += 1) {
                    InterNodalAdmin.modules[modules[i]](this);
                }

                callback(this);
            }

            InterNodalAdmin.modules = {};

            InterNodalAdmin.modules.url = function (app) {
                app.get_html = function (context, object_type) {
                    return app.html_address + '/' + context + '/' + object_type;
                };
                app.get_html_url_contexts = function () {
                    return app.html_address + '/meta/*';
                };
                app.get_html_url_object_types = function (context) {
                    return app.html_address + '/meta/' + context + '/*';
                };
                app.get_html_url_object_type_form = function (context, object_type) {
                    return app.html_address + '/meta/' + context + '/' + object_type;
                };
                app.get_html_url_member_types = function (context, object_type) {
                    return app.html_address + '/meta/' + context + '/' + object_type + '/*';
                };
                app.get_html_url_values_list = function (context, object_type, value_type) {
                    return app.html_address + '/list/' + context + '/' + object_type + '/' + value_type;
                };
                app.get_html_url_repo_view = function (context, view) {
                    return app.html_address + '/repo/stats/' + context + '/' + view;
                };
                app.post_json_url_request = function (context) {
                    return app.data_address + '/request/' + context;
                };
                app.post_html_url_request = function (context) {
                    return app.html_address + '/request/' + context;
                };
                app.post_json_url_update = function (context, object_type) {
                    return app.data_address + '/update/' + context + '/' + object_type;
                };
            };


            InterNodalAdmin.modules.talk = function (app) {
                app.json_request = function (url, json, callback) {
                    let request = new Request(url, app.post_options(app.json_content_headers, json));
                    fetch(request)
                            .then(function (response) {
                                return response.text();
                            }).then(function (data) {
                        callback(data);
                    });
                };
                app.html_request = function (url, callback) {
                    let request = new Request(url, app.get_options(app.html_content_headers));
                    fetch(request)
                            .then(function (response) {
                                return response.text();
                            }).then(function (data) {
                        callback(data);
                    });
                };
            };



            InterNodalAdmin.modules.dom = function (app) {
                app.find_foreign_key = function (context, form_element) {
                    let foreignKeyElement = form_element.querySelector('.ForeignKey');
                    let results = [];
                    if (foreignKeyElement !== null && foreignKeyElement.classList.length > 1) {
                        for (let i = 0; i < foreignKeyElement.classList.length; i = i + 1) {
                            if (foreignKeyElement.classList[i].startsWith(context + '.')) {
                                let fk_object = foreignKeyElement.classList[i] + '.' + foreignKeyElement.name;
                                let value = {
                                    target_form_id: form_element.id,
                                    target_element_id: foreignKeyElement.id,
                                    fk_owner: fk_object
                                };
                                results.push(value);
                            }
                        }
                    }
                    return results;
                };
                app.selected_value = function (element_id) {
                    let element = document.getElementById(element_id);
                    if (element !== undefined) {
                        let selectElement = element.querySelector('select');
                        let collection = selectElement.selectedOptions;
                        if (collection.length >= 1) {
                            return collection[0].value;
                        }
                    }
                    return undefined;
                };
                app.attach_html = function (element_id, rawHTML, callback, clearTarget) {
                    var stagingElement = document.createElement('div');
                    stagingElement.insertAdjacentHTML('afterbegin', rawHTML);
                    var newElement = stagingElement.firstElementChild;
                    var element = document.getElementById(element_id);
                    if (element && element !== undefined) {
                        if (clearTarget && element.textContent && element.textContent !== undefined) {
                            element.textContent = '';
                        }
                        element.appendChild(newElement);
                        if (callback) {
                            callback(newElement);
                        }
                    } else {
                        console.error('element_id = ' + element_id + ' was not found');
                    }
                };
                app.append_html = function (element_id, rawHTML, callback) {
                    app.attach_html(element_id, rawHTML, callback, false);
                };
                app.replace_html = function (element_id, rawHTML, callback) {
                    app.attach_html(element_id, rawHTML, callback, true);
                };
                app.bind_input_event = function (element_id, listener, event) {
                    event = event || 'change';
                    let element = document.getElementById(element_id);
                    if (element !== undefined) {
                        let inputElement = element;
                        if (inputElement && inputElement.tagName !== 'INPUT') {
                            inputElement = element.querySelector('input');
                            if (inputElement && inputElement.tagName !== 'INPUT') {
                                console.error('Unable to find input with id="' + element_id + '"');
                            }
                        }
                        inputElement.addEventListener(event, listener, {passive: true});
                    } else {
                        console.error('Unable to find input with id="' + element_id + '"');
                    }
                };
                app.bind_select_event = function (element_id, listener) {
                    let element = document.getElementById(element_id);
                    if (element !== undefined) {
                        let selectElement = element;
                        if (selectElement && selectElement.tagName !== 'SELECT') {
                            selectElement = element.querySelector('select');
                            if (selectElement && selectElement.tagName !== 'SELECT') {
                                console.error('Unable to find select with id="' + element_id + '"');
                            }
                        }
                        selectElement.addEventListener('change', listener, {passive: true});
                    } else {
                        console.error('Unable to find select with id="' + element_id + '"');
                    }
                };
                app.bind_button_event = function (element_id, listener) {
                    let element = document.getElementById(element_id);
                    if (element !== undefined) {
                        let inputElement = element;
                        if (inputElement && inputElement.tagName !== 'BUTTON') {
                            inputElement = element.querySelector('button');
                            if (inputElement && inputElement.tagName !== 'BUTTON') {
                                console.error('Unable to find button with id="' + element_id + '"');
                            }
                        }
                        inputElement.addEventListener('click', listener);
                    } else {
                        console.error('Unable to find button with id="' + element_id + '"');
                    }
                };
            }


            function page_elements() {
                return {
                    context: 'context',
                    objectTypeList: 'object_type_list',
                    objectTypeFormLabel: 'object_type_form_label',
                    objectTypeForm: 'object_type_form',
                    memberTypeList: 'member_type_list',
                    predicates: 'predicates',
                    members: 'members',
                    add_to_predicate: 'add_to_predicate',
                    add_to_repo: 'add_to_repo',
                    move_to_form: 'move_to_form',
                    request_url: 'request_url',
                    request: 'json_request',
                    response: 'json_response',
                    update_request: 'update_request',
                    update_response: 'update_response'
                };
            }

            function page_actions(admin) {
                return {
                    AddMemberToPredicates: function (selectedMemberItem) {
                        let contextValue = admin.selected_value(admin.elements.context);
                        let objectTypeValue = admin.selected_value(admin.elements.objectTypeList);
                        let memberTypeValue = admin.selected_value(admin.elements.memberTypeList);
                        admin.html_request(
                                admin.get_html_url_values_list(contextValue, objectTypeValue, memberTypeValue),
                                function (rawHTML) {
                                    admin.append_html(
                                            admin.elements.predicates,
                                            rawHTML,
                                            function (attachedElement) {
                                                let inputElement = attachedElement.querySelector('input, select');
                                                if (!inputElement) {
                                                    console.error("Member Type's <input> tag was not found.");
                                                    return;
                                                }
                                                if (selectedMemberItem !== undefined) {
                                                    for (let i = 0; i < inputElement.options.length; i = i + 1) {
                                                        if (inputElement.options[i].value === selectedMemberItem) {
                                                            inputElement.selectedIndex = i;
                                                            break;
                                                        }
                                                    }
                                                }
                                                inputElement.addEventListener('change', admin.events.OnMemberValueChange);
                                                let labelElement = attachedElement.querySelector('label');
                                                if (!labelElement) {
                                                    console.error("Member Type's <label> tag was not found.");
                                                    return;
                                                }
                                                labelElement.addEventListener('click', admin.events.OnRemoveMemberFromPredicates);
                                                admin.events.OnMemberValueChange();
                                            }
                                    );
                                }
                        );
                    },
                    RemoveMemberFromPredicates: function (labelElement) {
                        let targetForRemoval = labelElement.parentNode;
                        labelElement.parentNode.parentNode.removeChild(targetForRemoval);
                    },
                    MoveQueryResponseToForm: function () {
                        let objectTypeValue = admin.selected_value(admin.elements.objectTypeList);
                        let containerDiv = document.getElementById(admin.elements.objectTypeForm);
                        let formElement = containerDiv.querySelector('form');
                        if (formElement) {
                            let responseElement = document.getElementById(admin.elements.response);
                            let response_obj = JSON.parse(responseElement.innerText);
                            let series_obj = response_obj[objectTypeValue];
                            if (Array.isArray(series_obj)) {
                                if (series_obj.length > 0) {
                                    let composite_obj = series_obj[0];
                                    if (composite_obj instanceof Object) {
                                        let inputs = formElement.elements;
                                        for (let property in composite_obj) {
                                            let key = objectTypeValue + '-' + property;
                                            if (inputs[key] !== undefined) {
                                                inputs[key].value = composite_obj[property];
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    CreateUpdate: function (objectTypeValue, formElement) {
                        let count = formElement.elements.length;
                        let root = {};
                        root[objectTypeValue] = {};
                        let object = root[objectTypeValue];
                        for (let i = 0; i < count; i = i + 1) {
                            let childElement = formElement.elements[i];
                            if (childElement && childElement.tagName === 'SELECT') {
                                object[childElement.name] = childElement.value;
                            } else if (childElement && childElement.tagName === 'INPUT') {
                                object[childElement.name] = childElement.value;
                            }
                        }
                        return root;
                    },
                    Submit: function () {
                        let contextValue = admin.selected_value(admin.elements.context);
                        let objectTypeValue = admin.selected_value(admin.elements.objectTypeList);
                        let containerDiv = document.getElementById(admin.elements.objectTypeForm);
                        let formElement = containerDiv.querySelector('form');
                        if (formElement) {
                            let root = admin.actions.CreateUpdate(objectTypeValue, formElement);
                            let json_message = JSON.stringify(root);
                            let url = admin.post_json_url_update(contextValue, objectTypeValue);
                            admin.json_request(url, json_message, function (json_response) {
                                let responseElement = document.getElementById(admin.elements.update_response);
                                responseElement.innerText = json_response;
                                admin.actions.Refresh();
                                admin.updates.ShowObjectTypeForm(contextValue, objectTypeValue);
                                /*
                                 let memberTypeValue = admin.selected_value(admin.elements.memberTypeList);
                                 admin.actions.RemoveMemberFromPredicates();
                                 admin.actions.AddMemberToPredicates();
                                 */
                            });
                        }
                    },
                    ClearQuery: function () {
                        let requestElement = document.getElementById(admin.elements.request);
                        requestElement.innerText = '';
                        let responseElement = document.getElementById(admin.elements.response);
                        responseElement.innerText = '';
                        let predicateElements = document.getElementById(admin.elements.predicates);
                        predicateElements.innerText = '';
                    },
                    ClearUpdate: function () {
                        let requestElement = document.getElementById(admin.elements.update_request);
                        requestElement.innerText = '';
                        let responseElement = document.getElementById(admin.elements.update_response);
                        responseElement.innerText = '';
                    },
                    Refresh: function () {
                        let requestElement = document.getElementById(admin.elements.request);
                        let json_request = requestElement.innerText;
                        let contextValue = admin.selected_value(admin.elements.context);
                        let url = admin.post_json_url_request(contextValue);
                        admin.json_request(url, json_request, function (json_response) {
                            let responseElement = document.getElementById(admin.elements.response);
                            responseElement.innerText = json_response;
                        });
                    },
                    Query: function () {
                        let contextValue = admin.selected_value(admin.elements.context);
                        let objectTypeValue = admin.selected_value(admin.elements.objectTypeList);
                        let predicateDivElement = document.getElementById(admin.elements.predicates);
                        if (!predicateDivElement) {
                            console.error("Predicate section at element_id '" + admin.elements.predicates + "' was not found.");
                            return;
                        }
                        let criteria = {};
                        if (predicateDivElement.hasChildNodes()) {
                            let children = predicateDivElement.childNodes;

                            for (let i = 0; i < children.length; ++i) {
                                let memberDivElement = children[i];
                                let labelElement = memberDivElement.querySelector('label');
                                let inputElement = memberDivElement.querySelector('input, select');
                                if (labelElement && inputElement) {
                                    let valueType = labelElement.textContent;
                                    let value = inputElement.value;
                                    criteria[valueType] = value;
                                }
                            }
                        }
                        var request = {};
                        request[objectTypeValue] = criteria;
                        let requestElement = document.getElementById(admin.elements.request);
                        requestElement.innerText = JSON.stringify(request, undefined, 2);
                        admin.actions.Refresh();
                    }
                };
            }

            function page_updates(admin) {
                return {
                    UpdateContextList: function () {
                        admin.html_request(
                                admin.get_html_url_contexts(),
                                function (rawHTML) {
                                    admin.replace_html(
                                            admin.elements.context,
                                            rawHTML,
                                            function () {
                                                admin.bind_select_event(admin.elements.context,
                                                        admin.events.OnContextChange);
                                                admin.events.OnContextChange();
                                            }
                                    );
                                }
                        );
                    },
                    UpdateObjectTypeList: function (context) {
                        admin.html_request(
                                admin.get_html_url_object_types(context),
                                function (rawHTML) {
                                    admin.replace_html(
                                            admin.elements.objectTypeList,
                                            rawHTML,
                                            function () {
                                                admin.bind_select_event(admin.elements.objectTypeList,
                                                        admin.events.OnObjectTypeChange);
                                                admin.events.OnObjectTypeChange();
                                            }
                                    );
                                }
                        );
                    },
                    UpdateMemberTypeList: function (context, object_type) {
                        admin.html_request(
                                admin.get_html_url_member_types(context, object_type),
                                function (rawHTML) {
                                    admin.replace_html(
                                            admin.elements.memberTypeList,
                                            rawHTML,
                                            function () {
                                                admin.bind_select_event(admin.elements.memberTypeList,
                                                        admin.events.OnMemberTypeChange);
                                                admin.events.OnMemberTypeChange();
                                            }
                                    );
                                }
                        );
                    },
                    UpdateMemberTypeDisplay: function (context, object_type, member_type) {
                        console.log(context + '->' + object_type + '->' + member_type);
                    },
                    /*
                     UpdateObjectTypeFormLabel: function(object_type) {
                     let labelDiv = document.getElementById(admin.elements.objectTypeFormLabel);
                     labelDiv.textContent = object_type;
                     },
                     */
                    ShowObjectTypeForm: function (context, object_type) {
                        admin.html_request(
                                admin.get_html_url_object_type_form(context, object_type),
                                function (rawHTML) {
                                    admin.replace_html(
                                            admin.elements.objectTypeForm,
                                            rawHTML,
                                            function () {
                                                //admin.updates.UpdateObjectTypeFormLabel(object_type);
                                                admin.updates.ShowObjectTypeRequest();
                                                let containerDiv = document.getElementById(admin.elements.objectTypeForm);
                                                let formElement = containerDiv.querySelector('form');
                                                if (formElement) {
                                                    let fk_object_types = admin.find_foreign_key(context, formElement);
                                                    admin.updates.BindEventToFormFieadmin(formElement.id, fk_object_types);
                                                }
                                            }
                                    );
                                }
                        );
                    },
                    ShowObjectTypeRequest: function () {
                        let contextValue = admin.selected_value(admin.elements.context);
                        let objectTypeValue = admin.selected_value(admin.elements.objectTypeList);
                        let containerDiv = document.getElementById(admin.elements.objectTypeForm);
                        let formElement = containerDiv.querySelector('form');
                        if (formElement) {
                            let root = admin.actions.CreateUpdate(objectTypeValue, formElement);
                            let requestElement = document.getElementById(admin.elements.update_request);
                            requestElement.innerText = JSON.stringify(root, undefined, 2);
                        }
                    },
                    BindEventToFormFieadmin: function (element_id, fk_object_types) {
                        let formElement = document.getElementById(element_id);
                        if (formElement) {
                            let count = formElement.elements.length;
                            for (let i = 0; i < count; i = i + 1) {
                                let childElement = formElement.elements[i];
                                if (fk_object_types[childElement.id] !== undefined) {
                                    admin.bind_input_event(childElement.id, admin.events.OnFKMemberFocus);
                                } else {
                                    if (childElement && childElement.tagName === 'SELECT') {
                                        admin.bind_select_event(childElement.id, admin.events.OnFormMemberChange);
                                    } else if (childElement && childElement.tagName === 'INPUT') {
                                        admin.bind_input_event(childElement.id, admin.events.OnFormMemberChange);
                                    }
                                }
                            }
                        }
                    }
                };
            }

            function page_events(admin) {
                return {
                    OnLoad: function (event) {
                        admin.updates.UpdateContextList();
                    },
                    OnContextChange: function (event) {
                        let contextValue = admin.selected_value(admin.elements.context);
                        admin.updates.UpdateObjectTypeList(contextValue);
                    },
                    OnObjectTypeChange: function (event) {
                        admin.actions.ClearQuery();
                        admin.actions.ClearUpdate();
                        let contextValue = admin.selected_value(admin.elements.context);
                        let objectTypeValue = admin.selected_value(admin.elements.objectTypeList);
                        admin.updates.UpdateMemberTypeList(contextValue, objectTypeValue);
                        admin.updates.ShowObjectTypeForm(contextValue, objectTypeValue);
                    },
                    OnMemberTypeChange: function (event) {
                        let contextValue = admin.selected_value(admin.elements.context);
                        let objectTypeValue = admin.selected_value(admin.elements.objectTypeList);
                        let memberTypeValue = admin.selected_value(admin.elements.memberTypeList);
                        admin.updates.UpdateMemberTypeDisplay(contextValue, objectTypeValue, memberTypeValue);
                    },
                    OnAddMemberToPredicates: function (event) {
                        admin.actions.AddMemberToPredicates();
                    },
                    OnRemoveMemberFromPredicates: function (event) {
                        admin.actions.RemoveMemberFromPredicates(event.target);
                    },
                    OnMemberValueChange: function (event) {
                        admin.actions.Query();
                    },
                    OnFormMemberChange: function (event) {
                        admin.updates.ShowObjectTypeRequest();
                    },
                    OnEdit: function (event) {
                        admin.actions.MoveQueryResponseToForm();
                    },
                    OnUpdate: function (event) {
                        admin.actions.Submit();
                    }
                };
            }

            window.onload = function () {
                InterNodalAdmin(function (admin) {
                    admin.history = {};
                    admin.elements = page_elements();
                    admin.actions = page_actions(admin);
                    admin.updates = page_updates(admin);
                    admin.events = page_events(admin);
                    admin.bind_button_event(admin.elements.add_to_predicate, admin.events.OnAddMemberToPredicates);
                    admin.bind_button_event(admin.elements.add_to_repo, admin.events.OnUpdate);
                    admin.bind_button_event(admin.elements.move_to_form, admin.events.OnEdit);
                    admin.events.OnLoad();
                });
            };
        </script>
    </head>
    <body>
        <div class='left-side'>
            <div id='context' class='section'>
            </div>
            <div id='object_type_list' class='section'></div>
            <div class='section'>
                <div id='member_type_list'></div>
                <div class='button'>
                    <button id='add_to_predicate' type='button'>Add-To-Predicates</button>
                </div>
            </div>
            <div class='section'>
                <div class='collection-title'>Predicates</div>
                <div id='predicates' class='collection'></div>
            </div>
            <div id='members' class='section dormant'></div>
            <div class='section'>
                <!--div id='object_type_form_label' class='collection-title'></div-->
                <div id='object_type_form'></div>
                <div class='button'>
                    <button id='add_to_repo' type='button'>Submit</button>
                </div>
            </div>
        </div>
        <div class='right-side'>
            <div id='request' class='section'>
                <div class='collection-title'>Query Request</div>
                <pre id='request_html'></pre>
                <pre id='json_request'></pre>
            </div>
            <div id='response' class='section'>
                <div class='collection-title'>Query Response</div>
                <pre id='json_response'></pre>
                <div class='button'>
                    <button id='move_to_form' type='button'>Edit</button>
                </div>
            </div>
            <div id='request' class='section'>
                <div class='collection-title'>Update Request</div>
                <pre id='update_request'></pre>
            </div>
            <div id='response' class='section'>
                <div class='collection-title'>Update Response</div>
                <pre id='update_response'></pre>
            </div>
        </div>
    </body>
</html>